# Touch Control + Gesture Scroll

–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–ª–∞–≤–Ω–æ–π –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ –¥–ª—è Linux —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∂–µ—Å—Ç–æ–≤ —Ç–∞—á–ø–∞–¥–∞.

## –û–ø–∏—Å–∞–Ω–∏–µ

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –¥–≤–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:
- **touch-control** - —ç–º—É–ª—è—Ç–æ—Ä —Å–∫—Ä–æ–ª–ª–∞ –¥–ª—è Wayland/X11
- **touchegg** (libinput) - –∑–∞—Ö–≤–∞—Ç –∂–µ—Å—Ç–æ–≤ —Ç–∞—á–ø–∞–¥–∞

–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è —Å–∏—Å—Ç–µ–º–∞, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **3-–ø–∞–ª—å—Ü–µ–≤—ã–µ swipe –∂–µ—Å—Ç—ã** –¥–ª—è **–ø–ª–∞–≤–Ω–æ–π –ø—Ä–æ–∫—Ä—É—Ç–∫–∏** –≤ –ª—é–±—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö.

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- ‚úÖ –ü–ª–∞–≤–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ 3 –ø–∞–ª—å—Ü–∞–º–∏ –Ω–∞ —Ç–∞—á–ø–∞–¥–µ
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –≤ Wayland –∏ X11
- ‚úÖ –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞—è –∏ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞
- ‚úÖ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –∏ –ø–ª–∞–≤–Ω–æ—Å—Ç—å
- ‚úÖ –ö–æ–Ω—Å–æ–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —Ä—É—á–Ω–æ–π –ø—Ä–æ–∫—Ä—É—Ç–∫–∏

### üîß –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø–µ—Ä–µ–¥ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —Ä–µ—à–µ–Ω–∏—è–º–∏
- **–ù–µ–ø—Ä–µ—Ä—ã–≤–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞**: –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç touchegg, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç –¥–µ–π—Å—Ç–≤–∏–µ –æ–¥–∏–Ω —Ä–∞–∑, –∑–¥–µ—Å—å –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–ª–∞–≤–Ω–æ –≤–æ –≤—Ä–µ–º—è –¥–≤–∏–∂–µ–Ω–∏—è –ø–∞–ª—å—Ü–µ–≤
- **–ë–µ–∑ sudo**: —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –ø—Ä–∞–≤ root (–ø—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–µ)
- **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç—å**: –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∏ X11, –∏ Wayland
- **–ì–∏–±–∫–æ—Å—Ç—å**: –º–Ω–æ–∂–µ—Å—Ç–≤–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å–∫–æ—Ä–æ—Å—Ç–∏, –ø–ª–∞–≤–Ω–æ—Å—Ç–∏ –∏ –ø–æ–≤–µ–¥–µ–Ω–∏—è

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

Ubuntu/Debian:
```bash
sudo apt update
sudo apt install build-essential libinput-dev pkg-config
```

### 2. –°–±–æ—Ä–∫–∞
```bash
cd touch-control
make all
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º—ã
```bash
./gesture-scroll --test
```

### 4. –ó–∞–ø—É—Å–∫
```bash
./gesture-scroll -v
```

–¢–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ 3 –ø–∞–ª—å—Ü–∞ –Ω–∞ —Ç–∞—á–ø–∞–¥–µ –¥–ª—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∏!

## –°–æ—Å—Ç–∞–≤ –ø—Ä–æ–µ–∫—Ç–∞

### –ü—Ä–æ–≥—Ä–∞–º–º—ã

1. **`scroll-tool`** - –∫–æ–Ω—Å–æ–ª—å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Ä—É—á–Ω–æ–π –ø—Ä–æ–∫—Ä—É—Ç–∫–∏
   ```bash
   ./scroll-tool down 5           # –°–∫—Ä–æ–ª–ª –≤–Ω–∏–∑ –Ω–∞ 5 —à–∞–≥–æ–≤  
   ./scroll-tool smooth-up 10     # –ü–ª–∞–≤–Ω—ã–π —Å–∫—Ä–æ–ª–ª –≤–≤–µ—Ä—Ö
   ```

2. **`gesture-scroll`** - –¥–µ–º–æ–Ω –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∂–µ—Å—Ç–æ–≤ —Ç–∞—á–ø–∞–¥–∞
   ```bash
   ./gesture-scroll               # –ó–∞–ø—É—Å–∫ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
   ./gesture-scroll -v            # –° –ø–æ–¥—Ä–æ–±–Ω—ã–º –≤—ã–≤–æ–¥–æ–º
   ./gesture-scroll --daemon      # –í —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
   ```

### –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏

- **`libscrollemulator.so`** - –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤ –¥—Ä—É–≥–∏–µ –ø—Ä–æ–µ–∫—Ç—ã
- **`scroll_emulator.h`** - C/C++ –∑–∞–≥–æ–ª–æ–≤–æ—á–Ω—ã–π —Ñ–∞–π–ª
- **`gesture_scroll_handler.h`** - –∑–∞–≥–æ–ª–æ–≤–æ—á–Ω—ã–π —Ñ–∞–π–ª –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∂–µ—Å—Ç–æ–≤

## –ñ–µ—Å—Ç—ã

| –ñ–µ—Å—Ç | –î–µ–π—Å—Ç–≤–∏–µ |
|------|----------|
| 3 –ø–∞–ª—å—Ü–∞ –≤–≤–µ—Ä—Ö | –ü–ª–∞–≤–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –≤–≤–µ—Ä—Ö |
| 3 –ø–∞–ª—å—Ü–∞ –≤–Ω–∏–∑ | –ü–ª–∞–≤–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –≤–Ω–∏–∑ |
| 3 –ø–∞–ª—å—Ü–∞ –≤–ª–µ–≤–æ | –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –≤–ª–µ–≤–æ |
| 3 –ø–∞–ª—å—Ü–∞ –≤–ø—Ä–∞–≤–æ | –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –≤–ø—Ä–∞–≤–æ |

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã gesture-scroll

```bash
./gesture-scroll [–û–ü–¶–ò–ò]

–û–ø—Ü–∏–∏:
  -d, --delay DELAY      –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É —à–∞–≥–∞–º–∏ —Å–∫—Ä–æ–ª–ª–∞ (–º—Å)
  -s, --smooth STEPS     –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö —à–∞–≥–æ–≤ –¥–ª—è –ø–ª–∞–≤–Ω–æ—Å—Ç–∏  
  -a, --accel FACTOR     –£—Å–∫–æ—Ä–µ–Ω–∏–µ (1.0 = –ø–æ—Å—Ç–æ—è–Ω–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å)
  -v, --verbose          –ü–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥
  --daemon               –ó–∞–ø—É—Å–∫ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
  --test                 –¢–µ—Å—Ç —Å–∏—Å—Ç–µ–º—ã
```

### –ü—Ä–∏–º–µ—Ä—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

```bash
# –ú–µ–¥–ª–µ–Ω–Ω–∞—è –∏ –æ—á–µ–Ω—å –ø–ª–∞–≤–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞
./gesture-scroll -d 30 -s 5

# –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ —Å —É—Å–∫–æ—Ä–µ–Ω–∏–µ–º
./gesture-scroll -d 20 -a 1.5

# –ó–∞–ø—É—Å–∫ –≤ —Ñ–æ–Ω–µ
./gesture-scroll --daemon -q
```

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤ —Å–∏—Å—Ç–µ–º—É

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞
```bash
make install
```

–≠—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç:
- `scroll-tool` ‚Üí `/usr/local/bin/`
- `gesture-scroll` ‚Üí `/usr/local/bin/`
- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ ‚Üí `/usr/local/lib/`
- –ó–∞–≥–æ–ª–æ–≤–æ—á–Ω—ã–µ —Ñ–∞–π–ª—ã ‚Üí `/usr/local/include/`

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞

–î–ª—è —Ä–∞–±–æ—Ç—ã –±–µ–∑ sudo –¥–æ–±–∞–≤—å—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≥—Ä—É–ø–ø—É input:
```bash
sudo usermod -a -G input $USER
```
–ó–∞—Ç–µ–º –ø–µ—Ä–µ–ª–æ–≥–∏–Ω—å—Ç–µ—Å—å.

### –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫

–°–æ–∑–¥–∞–π—Ç–µ systemd —Å–ª—É–∂–±—É:
```bash
# –°–æ–∑–¥–∞–µ–º —Ñ–∞–π–ª —Å–ª—É–∂–±—ã
sudo tee /etc/systemd/user/gesture-scroll.service << EOF
[Unit]
Description=Gesture Scroll Daemon
After=graphical-session.target

[Service]
Type=simple
ExecStart=/usr/local/bin/gesture-scroll --daemon -q
Restart=always
RestartSec=5

[Install]
WantedBy=default.target
EOF

# –í–∫–ª—é—á–∞–µ–º –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
systemctl --user enable gesture-scroll.service
systemctl --user start gesture-scroll.service
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º—ã
```bash
make test-gesture          # –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç
./gesture-scroll --test    # –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
```

### –ñ–∏–≤–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ  
```bash
make test-gesture-live     # –ó–∞–ø—É—Å–∫ —Å –≤—ã–≤–æ–¥–æ–º –æ—Ç–ª–∞–¥–∫–∏
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Å–æ–ª—å–Ω—ã—Ö –∫–æ–º–∞–Ω–¥
```bash
make test-scroll           # –¢–µ—Å—Ç scroll-tool
./scroll-tool test         # –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π
```

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
1. **ScrollEmulator** (–∏–∑ touch-control)
   - –≠–º—É–ª—è—Ü–∏—è —Å–∫—Ä–æ–ª–ª–∞ —á–µ—Ä–µ–∑ X11/uinput
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–ª–∞–≤–Ω—ã—Ö —Å–∫—Ä–æ–ª–ª–æ–≤
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –º–µ—Ç–æ–¥–∞

2. **GestureScrollHandler** (–Ω–æ–≤—ã–π)
   - –ó–∞—Ö–≤–∞—Ç libinput —Å–æ–±—ã—Ç–∏–π
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ 3-–ø–∞–ª—å—Ü–µ–≤—ã—Ö –∂–µ—Å—Ç–æ–≤
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å ScrollEmulator

3. **libinput integration** (–∏–∑ touchegg)
   - –ù–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –∑–∞—Ö–≤–∞—Ç –∂–µ—Å—Ç–æ–≤
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –≤–≤–æ–¥–∞

### –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã

```mermaid
graph LR
    A[–¢–∞—á–ø–∞–¥] --> B[libinput]
    B --> C[GestureScrollHandler]
    C --> D{3 –ø–∞–ª—å—Ü–∞?}
    D -->|–î–∞| E[ScrollEmulator]
    D -->|–ù–µ—Ç| F[–ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å]
    E --> G[X11/uinput]
    G --> H[–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ]
```

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### Gesture-scroll –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
groups | grep input

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ libinput
pkg-config --exists libinput && echo "OK" || echo "–ù–µ –Ω–∞–π–¥–µ–Ω"

# –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å sudo
sudo ./gesture-scroll --test
```

### –ñ–µ—Å—Ç—ã –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Ç–∞—á–ø–∞–¥ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∂–µ—Å—Ç—ã
libinput list-devices

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å –æ—Ç–ª–∞–¥–∫–æ–π
./gesture-scroll -v
```

### –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ ScrollEmulator
./scroll-tool test

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ  
echo $XDG_SESSION_TYPE
echo $WAYLAND_DISPLAY
echo $DISPLAY
```

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°–±–æ—Ä–∫–∞ –∏–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤
```bash
git clone <repository>
cd touch-control
make all
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∂–µ—Å—Ç–æ–≤
–†–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `gesture_scroll_handler.cpp`:
```cpp
// –í handleSwipeBegin –∏–∑–º–µ–Ω–∏—Ç–µ —É—Å–ª–æ–≤–∏–µ:
if (gesture_state_.finger_count == 4) {  // –î–ª—è 4 –ø–∞–ª—å—Ü–µ–≤
    // –≤–∞—à –∫–æ–¥
}
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –¥—Ä—É–≥–∏–µ –ø—Ä–æ–µ–∫—Ç—ã
```cpp
#include "scroll_emulator.h"

ScrollEmulator emulator;
emulator.initialize();
emulator.smoothScrollDown(10, 1000);  // –ü–ª–∞–≤–Ω–æ –≤–Ω–∏–∑
```

## –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

### –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞:
- ‚úÖ Ubuntu 20.04+ (Wayland/X11)
- ‚úÖ Fedora 35+ (Wayland/X11)  
- ‚úÖ Arch Linux (Wayland/X11)
- ‚úÖ Pop!_OS 22.04+

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- Linux kernel 4.15+
- libinput 1.10+
- –¢–∞—á–ø–∞–¥ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –º—É–ª—å—Ç–∏—Ç–∞—á
- X11 –∏–ª–∏ Wayland

## –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞:
- **touchegg** - GNU GPL v3
- **touch-control** - —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- üêõ –ë–∞–≥–∏: —Å–æ–∑–¥–∞–π—Ç–µ issue
- üí° –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è: —Å–æ–∑–¥–∞–π—Ç–µ feature request  
- üìß Email: [–≤–∞—à email]
- üí¨ –û–±—Å—É–∂–¥–µ–Ω–∏—è: [—Å—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–æ—Ä—É–º/—á–∞—Ç] 